<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pro Earning App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <!-- Monetag Ad Script - Fixed as requested -->
    <script src='//libtl.com/sdk.js' data-zone='9753772' data-sdk='show_9753772'></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --warning: #f72585;
            --danger: #e63946;
            --info: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --gold: #ffd700;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            min-height: 100vh;
            padding-bottom: 70px;
            overflow-x: hidden;
        }
        .app-container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            width: 100%;
        }
        /* Header Styles */
        .app-header {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }
        .app-title {
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--info));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        /* Page Container */
        .page {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s ease;
            width: 100%;
            max-height: calc(100vh - 120px); /* Adjusted for header and nav */
            overflow-y: auto; /* Enable scrolling only for VIP page */
        }
        .page.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Home Page Styles */
        .balance-card {
            background: var(--glass-bg);
            border-radius: 15px;
            padding: 12px; /* Reduced padding */
            text-align: center;
            margin-bottom: 15px; /* Reduced margin */
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .balance-amount {
            font-size: 1.5rem; /* Reduced font size */
            font-weight: 800;
            margin: 6px 0; /* Reduced margin */
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .balance-label {
            font-size: 0.8rem; /* Reduced font size */
            opacity: 0.8;
        }
        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px; /* Reduced gap */
            margin-bottom: 15px; /* Reduced margin */
        }
        .stat-card {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 10px 6px; /* Reduced padding */
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }
        .stat-value {
            font-size: 1rem; /* Reduced font size */
            font-weight: 700;
            margin: 2px 0; /* Reduced margin */
        }
        .stat-label {
            font-size: 0.65rem; /* Reduced font size */
            opacity: 0.8;
        }
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px; /* Reduced gap */
            margin-bottom: 20px; /* Reduced margin */
        }
        .action-btn {
            border: none;
            border-radius: 12px; /* Reduced border radius */
            padding: 12px 8px; /* Reduced padding */
            color: white;
            font-weight: 600;
            font-size: 0.75rem; /* Reduced font size */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px; /* Reduced gap */
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-height: 75px; /* Reduced height */
        }
        .action-btn:hover {
            transform: translateY(-2px); /* Reduced hover effect */
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
        }
        .action-btn i {
            font-size: 1.2rem; /* Reduced icon size */
        }
        .btn-primary { background: linear-gradient(45deg, var(--primary), var(--secondary)); }
        .btn-success { background: linear-gradient(45deg, var(--success), #3a86ff); }
        .btn-warning { background: linear-gradient(45deg, var(--warning), #ff0a54); }
        .btn-danger { background: linear-gradient(45deg, var(--danger), #d00000); }
        .btn-info { background: linear-gradient(45deg, var(--info), #538bf0); }
        .btn-gold { background: linear-gradient(45deg, var(--gold), #ffb700); }
        /* Support Button (Home Page - Fixed Position) */
        .support-btn-home {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            width: 45px; /* Reduced size */
            height: 45px; /* Reduced size */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem; /* Reduced icon size */
            z-index: 999;
            backdrop-filter: blur(10px);
        }
        .support-btn-home:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        /* Tasks Page */
        .task-card {
            background: var(--glass-bg);
            border-radius: 12px; /* Reduced border radius */
            padding: 15px; /* Reduced padding */
            margin-bottom: 12px; /* Reduced margin */
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 12px; /* Reduced gap */
        }
        .task-icon {
            width: 45px; /* Reduced size */
            height: 45px; /* Reduced size */
            border-radius: 10px; /* Reduced border radius */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem; /* Reduced icon size */
        }
        .task-info {
            flex: 1;
        }
        .task-title {
            font-weight: 600;
            margin-bottom: 4px; /* Reduced margin */
            font-size: 0.85rem; /* Reduced font size */
        }
        .task-reward {
            font-size: 0.8rem; /* Reduced font size */
            color: var(--gold);
            font-weight: 600;
        }
        .task-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 12px; /* Reduced padding */
            border-radius: 18px; /* Reduced border radius */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 70px; /* Reduced width */
            font-size: 0.75rem; /* Reduced font size */
        }
        .task-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .task-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        /* VIP Page - Scrollable */
        #vip-page {
            max-height: calc(100vh - 120px); /* Adjusted for header and nav */
            overflow-y: auto; /* Enable scrolling for VIP page */
        }
        .vip-card {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border-radius: 12px; /* Reduced border radius */
            padding: 15px; /* Reduced padding */
            text-align: center;
            margin-bottom: 20px; /* Reduced margin */
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); /* Reduced shadow */
        }
        .vip-badge {
            position: absolute;
            top: 10px; /* Reduced top */
            right: 10px; /* Reduced right */
            background: var(--gold);
            color: #000;
            padding: 2px 8px; /* Reduced padding */
            border-radius: 10px; /* Reduced border radius */
            font-weight: 700;
            font-size: 0.55rem; /* Reduced font size */
        }
        .vip-title {
            font-size: 1.1rem; /* Reduced font size */
            margin-bottom: 5px; /* Reduced margin */
            color: var(--gold);
        }
        .vip-benefits {
            text-align: left;
            margin: 12px 0; /* Reduced margin */
        }
        .benefit-item {
            display: flex;
            align-items: center;
            gap: 5px; /* Reduced gap */
            margin-bottom: 8px; /* Reduced margin */
            font-size: 0.75rem; /* Reduced font size */
        }
        .benefit-icon {
            color: var(--gold);
            font-size: 0.7rem; /* Reduced icon size */
        }
        .vip-price {
            font-size: 1.2rem; /* Reduced font size */
            font-weight: 800;
            margin: 10px 0; /* Reduced margin */
            color: var(--gold);
        }
        .vip-btn {
            background: linear-gradient(45deg, var(--gold), #ffb700);
            color: #000;
            border: none;
            padding: 8px 16px; /* Reduced padding */
            border-radius: 18px; /* Reduced border radius */
            font-weight: 700;
            font-size: 0.8rem; /* Reduced font size */
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        .vip-btn:hover {
            transform: scale(1.01); /* Reduced hover effect */
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); /* Reduced shadow */
        }
        .vip-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        /* Deposit Instructions - Smaller */
        .deposit-instructions {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 12px; /* Reduced padding */
            margin-bottom: 12px; /* Reduced margin */
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
        }
        .instruction-title {
            text-align: center;
            margin-bottom: 10px; /* Reduced margin */
            color: var(--success);
            font-size: 1rem; /* Reduced font size */
        }
        .payment-details {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px; /* Reduced border radius */
            padding: 10px; /* Reduced padding */
            margin: 10px 0; /* Reduced margin */
            text-align: center;
        }
        .payment-number {
            font-size: 1rem; /* Reduced font size */
            font-weight: 700;
            color: var(--gold);
            margin: 6px 0; /* Reduced margin */
            letter-spacing: 1px;
            word-break: break-all;
        }
        .copy-btn {
            background: linear-gradient(45deg, var(--primary), var(--info));
            color: white;
            border: none;
            padding: 5px 10px; /* Reduced padding */
            border-radius: 12px; /* Reduced border radius */
            font-weight: 600;
            cursor: pointer;
            font-size: 0.75rem; /* Reduced font size */
            margin-top: 6px; /* Reduced margin */
            transition: all 0.3s ease;
        }
        .copy-btn:hover {
            transform: translateY(-1px); /* Reduced hover effect */
            box-shadow: 0 2px 6px rgba(67, 97, 238, 0.4); /* Reduced shadow */
        }
        .important-note {
            background: rgba(255, 193, 7, 0.1);
            border-left: 3px solid #ffc107;
            padding: 8px; /* Reduced padding */
            border-radius: 0 5px 5px 0; /* Reduced border radius */
            margin: 10px 0; /* Reduced margin */
            font-size: 0.7rem; /* Reduced font size */
        }
        /* Deposit/Withdraw Forms - Smaller */
        .form-card {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 15px; /* Reduced padding */
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            margin-bottom: 12px; /* Reduced margin */
        }
        .form-title {
            text-align: center;
            margin-bottom: 12px; /* Reduced margin */
            font-size: 1.1rem; /* Reduced font size */
            color: var(--success);
        }
        .form-group {
            margin-bottom: 12px; /* Reduced margin */
        }
        .form-label {
            display: block;
            margin-bottom: 5px; /* Reduced margin */
            font-weight: 500;
            font-size: 0.8rem; /* Reduced font size */
        }
        .form-input {
            width: 100%;
            padding: 10px; /* Reduced padding */
            border-radius: 6px; /* Reduced border radius */
            border: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 0.85rem; /* Reduced font size */
        }
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        .form-select {
            width: 100%;
            padding: 10px; /* Reduced padding */
            border-radius: 6px; /* Reduced border radius */
            border: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 0.85rem; /* Reduced font size */
        }
        .submit-btn {
            width: 100%;
            padding: 10px; /* Reduced padding */
            border: none;
            border-radius: 6px; /* Reduced border radius */
            background: linear-gradient(45deg, var(--primary), var(--info));
            color: white;
            font-weight: 600;
            font-size: 0.9rem; /* Reduced font size */
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .submit-btn:hover {
            transform: translateY(-1px); /* Reduced hover effect */
            box-shadow: 0 3px 10px rgba(67, 97, 238, 0.4); /* Reduced shadow */
        }
        .submit-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        /* Withdraw History */
        .history-item {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 12px; /* Reduced padding */
            margin-bottom: 12px; /* Reduced margin */
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .history-info {
            flex: 1;
        }
        .history-amount {
            font-weight: 700;
            font-size: 1rem; /* Reduced font size */
        }
        .history-method {
            font-size: 0.8rem; /* Reduced font size */
            opacity: 0.8;
            margin: 4px 0; /* Reduced margin */
        }
        .history-date {
            font-size: 0.7rem; /* Reduced font size */
            opacity: 0.7;
        }
        .history-status {
            padding: 4px 8px; /* Reduced padding */
            border-radius: 18px; /* Reduced border radius */
            font-size: 0.7rem; /* Reduced font size */
            font-weight: 600;
        }
        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }
        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }
        .status-failed {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        /* Profile Page */
        .profile-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .profile-avatar {
            width: 75px; /* Reduced size */
            height: 75px; /* Reduced size */
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary), var(--info));
            margin: 0 auto 12px; /* Reduced margin */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem; /* Reduced font size */
            font-weight: bold;
        }
        .profile-name {
            font-size: 1.2rem; /* Reduced font size */
            font-weight: 700;
            margin-bottom: 4px; /* Reduced margin */
        }
        .profile-id {
            font-size: 0.8rem; /* Reduced font size */
            opacity: 0.7;
        }
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px; /* Reduced gap */
            margin-bottom: 20px; /* Reduced margin */
        }
        .profile-stat {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 10px 6px; /* Reduced padding */
            text-align: center;
        }
        .profile-stat-value {
            font-size: 1rem; /* Reduced font size */
            font-weight: 700;
            margin-bottom: 2px; /* Reduced margin */
        }
        .profile-stat-label {
            font-size: 0.65rem; /* Reduced font size */
            opacity: 0.8;
        }
        .profile-actions {
            display: grid;
            gap: 10px; /* Reduced gap */
        }
        .profile-action {
            background: var(--glass-bg);
            border-radius: 10px; /* Reduced border radius */
            padding: 12px; /* Reduced padding */
            display: flex;
            align-items: center;
            gap: 12px; /* Reduced gap */
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--glass-border);
        }
        .profile-action:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .profile-action i {
            font-size: 1rem; /* Reduced icon size */
            width: 30px; /* Reduced size */
            height: 30px; /* Reduced size */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .action-1 { background: rgba(67, 97, 238, 0.2); color: var(--primary); }
        .action-2 { background: rgba(76, 201, 240, 0.2); color: var(--success); }
        .action-3 { background: rgba(247, 37, 133, 0.2); color: var(--warning); }
        .action-4 { background: rgba(230, 57, 70, 0.2); color: var(--danger); }
        .action-5 { background: rgba(255, 215, 0, 0.2); color: var(--gold); }
        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 10px 0; /* Reduced padding */
            border-top: 1px solid var(--glass-border);
            z-index: 1000;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px; /* Reduced gap */
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.65rem; /* Reduced font size */
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 4px 8px; /* Reduced padding */
            border-radius: 8px; /* Reduced border radius */
            width: 20%;
            text-align: center;
        }
        .nav-item.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        .nav-item i {
            font-size: 1rem; /* Reduced icon size */
        }
        .nav-item:hover {
            color: white;
        }
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 20px; /* Reduced padding */
            border-radius: 8px; /* Reduced border radius */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Reduced shadow */
            z-index: 2000;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            max-width: 90%;
            text-align: center;
        }
        /* Block Page */
        .block-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 15px; /* Reduced padding */
        }
        .block-content {
            background: white;
            color: #333;
            padding: 30px; /* Reduced padding */
            border-radius: 12px; /* Reduced border radius */
            max-width: 500px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3); /* Reduced shadow */
        }
        .block-content h2 {
            color: #ff6b6b;
            margin-bottom: 15px; /* Reduced margin */
        }
        .telegram-link {
            display: inline-block;
            padding: 10px 20px; /* Reduced padding */
            background: #0088cc;
            color: white;
            text-decoration: none;
            border-radius: 20px; /* Reduced border radius */
            font-weight: bold;
            margin: 15px 0; /* Reduced margin */
            transition: background 0.3s;
        }
        .telegram-link:hover {
            background: #006699;
        }
        /* Responsive Adjustments */
        @media (max-width: 480px) {
            .action-btn {
                font-size: 0.7rem;
                padding: 10px 6px;
                min-height: 70px;
            }
            .task-card {
                padding: 12px;
                gap: 10px;
            }
            .task-icon {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            .task-title {
                font-size: 0.8rem;
            }
            .task-reward {
                font-size: 0.75rem;
            }
            .task-btn {
                padding: 5px 10px;
                font-size: 0.7rem;
                min-width: 65px;
            }
            .vip-card {
                padding: 12px;
            }
            .vip-title {
                font-size: 1rem;
            }
            .vip-price {
                font-size: 1.1rem;
            }
            .vip-btn {
                padding: 7px 14px;
                font-size: 0.75rem;
            }
            .benefit-item {
                font-size: 0.7rem;
            }
            .form-input, .form-select {
                padding: 8px;
                font-size: 0.8rem;
            }
            .submit-btn {
                padding: 8px;
                font-size: 0.85rem;
            }
        }
        @media (max-width: 360px) {
            .app-title {
                font-size: 1.2rem;
            }
            .user-avatar {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            .balance-amount {
                font-size: 1.3rem;
            }
            .stat-value {
                font-size: 0.9rem;
            }
            .action-btn {
                font-size: 0.65rem;
                padding: 8px 5px;
                min-height: 65px;
            }
            .profile-avatar {
                width: 70px;
                height: 70px;
                font-size: 1.6rem;
            }
            .profile-name {
                font-size: 1.1rem;
            }
            .profile-stat-value {
                font-size: 0.9rem;
            }
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Block Page (Invisible by default) -->
        <div class="block-page" id="blockPage">
            <div class="block-content">
                <h2>⚠️ Your Account Has Been Blocked!</h2>
                <p>You can no longer use this app.</p>
                <p>Contact the admin:</p>
                <a href="https://t.me/Nikhil_Shaan" target="_blank" class="telegram-link">@Nikhil_Shaan (Telegram)</a>
                <p class="note">Your account will be unblocked by the admin panel to use the app again.</p>
            </div>
        </div>
        <!-- Loading Screen -->
        <div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
            <div class="spinner"></div>
            <div class="loading-text">Loading App...</div>
        </div>
        <!-- Header -->
        <div class="app-header">
            <div class="app-title">EARN PRO</div>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
            </div>
        </div>
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="balance-card">
                <div class="balance-label">YOUR BALANCE</div>
                <div class="balance-amount" id="home-balance">0.00000 BDT</div>
                <div class="balance-label">Available for withdrawal</div>
            </div>
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">TOTAL EARNED</div>
                    <div class="stat-value" id="home-total-earned">0.00000</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">AD VIEWS</div>
                    <div class="stat-value" id="home-ad-views">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">REFERRALS</div>
                    <div class="stat-value" id="home-referrals">0</div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="action-btn btn-primary" onclick="showPage('tasks-page')">
                    <i class="fas fa-tasks"></i>
                    <span>DAILY TASKS</span>
                </button>
                <button class="action-btn btn-success" id="monetagButton" onclick="showMonetagAd()">
                    <i class="fas fa-ad"></i>
                    <span>WATCH AD</span>
                </button>
                <button class="action-btn btn-warning" onclick="showPage('vip-page')">
                    <i class="fas fa-crown"></i>
                    <span>GET VIP</span>
                </button>
                <button class="action-btn btn-danger" onclick="showPage('deposit-page')">
                    <i class="fas fa-arrow-down"></i>
                    <span>DEPOSIT</span>
                </button>
                <button class="action-btn btn-info" onclick="showPage('withdraw-page')">
                    <i class="fas fa-arrow-up"></i>
                    <span>WITHDRAW</span>
                </button>
                <button class="action-btn btn-gold" onclick="showPage('withdraw-history-page')">
                    <i class="fas fa-history"></i>
                    <span>WITHDRAW HISTORY</span>
                </button>
            </div>
        </div>
        <!-- Tasks Page -->
        <div id="tasks-page" class="page">
            <h2 style="text-align: center; margin-bottom: 15px;">DAILY TASKS</h2>
            <div class="task-card">
                <div class="task-icon" style="background: rgba(67, 97, 238, 0.2); color: var(--primary);">
                    <i class="fas fa-video"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Watch Video Ad</div>
                    <div class="task-reward" id="watchAdReward">+0.00100 BDT</div>
                </div>
                <button class="task-btn" id="watchAdBtn" onclick="showRewardedAd()">START</button>
            </div>
            <div class="task-card">
                <div class="task-icon" style="background: rgba(76, 201, 240, 0.2); color: var(--success);">
                    <i class="fas fa-share-alt"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Share App</div>
                    <div class="task-reward" id="shareAppReward">+0.00200 BDT</div>
                </div>
                <button class="task-btn" id="shareAppBtn" onclick="shareApp()">SHARE</button>
            </div>
            <div class="task-card">
                <div class="task-icon" style="background: rgba(247, 37, 133, 0.2); color: var(--warning);">
                    <i class="fas fa-users"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Invite Friends</div>
                    <div class="task-reward" id="inviteFriendsReward">+0.00050 BDT/each</div>
                </div>
                <button class="task-btn" id="inviteFriendsBtn" onclick="inviteFriends()">INVITE</button>
            </div>
            <div class="task-card">
                <div class="task-icon" style="background: rgba(230, 57, 70, 0.2); color: var(--danger);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="task-info">
                    <div class="task-title">Daily Check-in</div>
                    <div class="task-reward" id="dailyCheckinReward">+0.00150 BDT</div>
                </div>
                <button class="task-btn" id="dailyCheckinBtn" onclick="claimDailyCheckin()">CLAIM</button>
            </div>
        </div>
        <!-- VIP Page -->
        <div id="vip-page" class="page">
            <h2 style="text-align: center; margin-bottom: 15px;">VIP PACKAGES</h2>
            <!-- VIP Package 1 -->
            <div class="vip-card">
                <div class="vip-badge">BRONZE</div>
                <h2 class="vip-title">VIP BRONZE</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock basic VIP benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">1.2x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                </div>
                <div class="vip-price">99.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(99, 'BRONZE')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 2 -->
            <div class="vip-card">
                <div class="vip-badge">SILVER</div>
                <h2 class="vip-title">VIP SILVER</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock silver benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">1.5x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Support</span>
                    </div>
                </div>
                <div class="vip-price">199.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(199, 'SILVER')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 3 -->
            <div class="vip-card">
                <div class="vip-badge">GOLD</div>
                <h2 class="vip-title">VIP GOLD</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock gold benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">2x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 50</span>
                    </div>
                </div>
                <div class="vip-price">299.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(299, 'GOLD')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 4 -->
            <div class="vip-card">
                <div class="vip-badge">PLATINUM</div>
                <h2 class="vip-title">VIP PLATINUM</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock platinum benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">2.5x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 100</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                </div>
                <div class="vip-price">499.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(499, 'PLATINUM')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 5 -->
            <div class="vip-card">
                <div class="vip-badge">DIAMOND</div>
                <h2 class="vip-title">VIP DIAMOND</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock diamond benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">3x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 200</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                </div>
                <div class="vip-price">799.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(799, 'DIAMOND')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 6 -->
            <div class="vip-card">
                <div class="vip-badge">TITANIUM</div>
                <h2 class="vip-title">VIP TITANIUM</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock titanium benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">3.5x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 300</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special Events Access</span>
                    </div>
                </div>
                <div class="vip-price">999.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(999, 'TITANIUM')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 7 -->
            <div class="vip-card">
                <div class="vip-badge">EMERALD</div>
                <h2 class="vip-title">VIP EMERALD</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock emerald benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">4x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 500</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special Events Access</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Personal Account Manager</span>
                    </div>
                </div>
                <div class="vip-price">1499.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(1499, 'EMERALD')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 8 -->
            <div class="vip-card">
                <div class="vip-badge">RUBY</div>
                <h2 class="vip-title">VIP RUBY</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock ruby benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">4.5x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 750</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special Events Access</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Personal Account Manager</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Early Access to New Features</span>
                    </div>
                </div>
                <div class="vip-price">1999.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(1999, 'RUBY')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 9 -->
            <div class="vip-card">
                <div class="vip-badge">SAPPHIRE</div>
                <h2 class="vip-title">VIP SAPPHIRE</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock sapphire benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">5x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 1000</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special Events Access</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Personal Account Manager</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Early Access to New Features</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">VIP Only Community</span>
                    </div>
                </div>
                <div class="vip-price">2999.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(2999, 'SAPPHIRE')">GET VIP NOW</button>
            </div>
            <!-- VIP Package 10 -->
            <div class="vip-card">
                <div class="vip-badge">ROYAL</div>
                <h2 class="vip-title">VIP ROYAL</h2>
                <p style="font-size: 0.8rem; opacity: 0.9;">Unlock royal benefits</p>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">10x Earning Rate</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special VIP Ad (+৳ 10 per view)</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Priority Withdrawals</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Monthly Bonus ৳ 2000</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">24/7 Customer Support</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Exclusive Tasks</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Special Events Access</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Personal Account Manager</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Early Access to New Features</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">VIP Only Community</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-check-circle benefit-icon"></i>
                        <span style="font-size: 0.75rem;">Custom Rewards</span>
                    </div>
                </div>
                <div class="vip-price">4999.00000 BDT</div>
                <button class="vip-btn" onclick="requestVip(4999, 'ROYAL')">GET VIP NOW</button>
            </div>
        </div>
        <!-- Deposit Page -->
        <div id="deposit-page" class="page">
            <div class="deposit-instructions">
                <h2 class="instruction-title">DEPOSIT INSTRUCTIONS</h2>
                <div class="payment-details">
                    <p style="font-size: 0.85rem; margin-bottom: 6px;">Send money to this number:</p>
                    <div class="payment-number" id="payment-number">Loading...</div>
                    <button class="copy-btn" onclick="copyNumber()">COPY NUMBER</button>
                </div>
                <div class="important-note">
                    <p><i class="fas fa-exclamation-circle"></i> After sending money, fill out the form below with your transaction details</p>
                </div>
                <p style="text-align: center; margin-top: 10px; font-size: 0.8rem;">
                    <strong>Send money to:</strong> <span id="payment-number2">Loading...</span><br>
                    <strong>After payment, submit the form below</strong>
                </p>
            </div>
            <div class="form-card">
                <h2 class="form-title">DEPOSIT REQUEST</h2>
                <div class="form-group">
                    <label class="form-label">Your Phone Number</label>
                    <input type="text" class="form-input" id="user-phone" placeholder="Enter your phone number">
                </div>
                <div class="form-group">
                    <label class="form-label">Transaction ID</label>
                    <input type="text" class="form-input" id="transaction-id" placeholder="Enter transaction ID">
                </div>
                <div class="form-group">
                    <label class="form-label">Amount (BDT)</label>
                    <input type="number" class="form-input" id="deposit-amount" placeholder="Enter amount">
                </div>
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select class="form-select" id="payment-method">
                        <option value="bkash">bKash</option>
                        <option value="nagad">Nagad</option>
                        <option value="rocket">Rocket</option>
                    </select>
                </div>
                <button class="submit-btn" id="submitDepositBtn" onclick="submitDeposit()">SUBMIT DEPOSIT</button>
            </div>
        </div>
        <!-- Withdraw Page -->
        <div id="withdraw-page" class="page">
            <div class="form-card">
                <h2 class="form-title">WITHDRAW FUNDS</h2>
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select class="form-select" id="withdraw-method">
                        <option value="nagad">Nagad</option>
                        <option value="bkash">bKash</option>
                        <option value="rocket">Rocket</option>
                        <option value="bank">Bank Transfer</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Amount (BDT)</label>
                    <input type="number" class="form-input" id="withdraw-amount" placeholder="Enter amount">
                </div>
                <div class="form-group">
                    <label class="form-label">Account Number</label>
                    <input type="text" class="form-input" id="account-number" placeholder="Enter account number">
                </div>
                <button class="submit-btn" id="processWithdrawalBtn" onclick="processWithdrawal()">WITHDRAW NOW</button>
            </div>
        </div>
        <!-- Withdraw History Page -->
        <div id="withdraw-history-page" class="page">
            <h2 style="text-align: center; margin-bottom: 15px;">WITHDRAW HISTORY</h2>
            <div id="withdraw-history-list">
                <!-- History items will be loaded here -->
            </div>
        </div>
        <!-- Deposit History Page -->
        <div id="deposit-history-page" class="page">
            <h2 style="text-align: center; margin-bottom: 15px;">DEPOSIT HISTORY</h2>
            <div id="deposit-history-list">
                <!-- History items will be loaded here -->
            </div>
        </div>
        <!-- Profile Page -->
        <div id="profile-page" class="page">
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">U</div>
                <div class="profile-name" id="profileName">Loading...</div>
                <div class="profile-id" id="profileId">ID: Loading...</div>
            </div>
            <div class="profile-stats">
                <div class="profile-stat">
                    <div class="profile-stat-value" id="profile-balance">0.00000</div>
                    <div class="profile-stat-label">BALANCE</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="profile-ad-views">0</div>
                    <div class="profile-stat-label">AD VIEWS</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="profile-referrals">0</div>
                    <div class="profile-stat-label">REFERRALS</div>
                </div>
            </div>
            <div class="profile-actions">
                <div class="profile-action" onclick="showPage('deposit-page')">
                    <i class="fas fa-arrow-down action-1"></i>
                    <div>Deposit Funds</div>
                </div>
                <div class="profile-action" onclick="showPage('withdraw-page')">
                    <i class="fas fa-arrow-up action-2"></i>
                    <div>Withdraw Funds</div>
                </div>
                <div class="profile-action" onclick="showPage('vip-page')">
                    <i class="fas fa-crown action-3"></i>
                    <div>VIP Membership</div>
                </div>
                <div class="profile-action" onclick="showPage('withdraw-history-page')">
                    <i class="fas fa-history action-4"></i>
                    <div>Withdraw History</div>
                </div>
                <div class="profile-action" onclick="showPage('deposit-history-page')">
                    <i class="fas fa-receipt action-5"></i>
                    <div>Deposit History</div>
                </div>
            </div>
        </div>
        <!-- Support Button - Fixed Position -->
        <div class="support-btn-home" onclick="openSupport()">
            <i class="fas fa-headset"></i>
        </div>
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <div class="nav-item active" data-page="home-page" onclick="showPage('home-page')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" data-page="tasks-page" onclick="showPage('tasks-page')">
                <i class="fas fa-tasks"></i>
                <span>Tasks</span>
            </div>
            <div class="nav-item" data-page="vip-page" onclick="showPage('vip-page')">
                <i class="fas fa-crown"></i>
                <span>VIP</span>
            </div>
            <div class="nav-item" data-page="deposit-page" onclick="showPage('deposit-page')">
                <i class="fas fa-arrow-down"></i>
                <span>Deposit</span>
            </div>
            <div class="nav-item" data-page="profile-page" onclick="showPage('profile-page')">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </div>
        </div>
        <!-- Notification -->
        <div id="notification" class="notification"></div>
    </div>
    <script>
        // Firebase Config - Replace with your actual config
        const firebaseConfig = {
            apiKey: "AIzaSyD3BGZ0MVLpbQbIpLUAnYvWNEIyk7Y6S0Q",
            authDomain: "earning-app-80258.firebaseapp.com",
            databaseURL: "https://earning-app-80258-default-rtdb.firebaseio.com",
            projectId: "earning-app-80258",
            storageBucket: "earning-app-80258.appspot.com",
            messagingSenderId: "25930019210",
            appId: "1:25930019210:web:6441562811d3e7e9631873",
            measurementId: "G-P9HX6XXT1Q"
        };
        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();
        const firestore = firebase.firestore(); // For better data handling
        // Global variables
        let userId = null;
        let userData = {
            balance: 0,
            totalEarned: 0,
            adViews: 0,
            referrals: 0,
            isVip: false,
            isBlocked: false,
            lastCheckin: null, // For daily check-in
            referredBy: null // Store referrer ID
        };
        let appSettings = {}; // To store settings from Firebase
        let userRef = null; // Reference to the user's data in Firebase
        // --- Utility Functions ---
        // Page Navigation
        function showPage(pageId) {
            // Check if user is blocked
            if (userData.isBlocked && pageId !== 'block-page') {
                document.getElementById('blockPage').style.display = 'flex';
                return;
            } else if (!userData.isBlocked && pageId === 'block-page') {
                document.getElementById('blockPage').style.display = 'none';
            }
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            if(pageId !== 'withdraw-history-page' && pageId !== 'deposit-history-page') {
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.page === pageId) {
                        item.classList.add('active');
                    }
                });
            } else {
                document.querySelectorAll('.nav-item').forEach(item => {
                    if (item.dataset.page === 'profile-page') {
                        item.classList.add('active');
                    }
                });
            }
            // Load history if needed
            if (pageId === 'withdraw-history-page') {
                loadWithdrawHistory();
            } else if (pageId === 'deposit-history-page') {
                loadDepositHistory();
            }
        }
        // Show notification
        function showNotification(message, isSuccess = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            notification.style.backgroundColor = isSuccess ? 'rgba(40, 167, 69, 0.9)' : 'rgba(220, 53, 69, 0.9)';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        // Format number to 5 decimal places
        function formatNumber(num) {
            return parseFloat(num).toFixed(5);
        }
        // --- Core App Logic ---
        // Initialize App
        async function initApp() {
            try {
                console.log("Initializing App...");
                // 1. Get Telegram User ID
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.ready();
                    window.Telegram.WebApp.expand();
                    const tgUser = window.Telegram.WebApp.initDataUnsafe.user;
                    if (tgUser && tgUser.id) {
                        userId = tgUser.id.toString(); // Ensure it's a string
                        console.log("Telegram User ID:", userId);
                        document.getElementById('userAvatar').textContent = tgUser.first_name ? tgUser.first_name.charAt(0) : 'U';
                        document.getElementById('profileAvatar').textContent = tgUser.first_name ? tgUser.first_name.charAt(0) : 'U';
                        document.getElementById('profileName').textContent = `${tgUser.first_name || ''} ${tgUser.last_name || ''}`.trim() || 'User';
                        document.getElementById('profileId').textContent = `ID: ${userId}`;
                    } else {
                        throw new Error("Could not get Telegram User ID");
                    }
                } else {
                    // Fallback for testing (use a dummy ID)
                     userId = "test_user_123"; // ONLY FOR TESTING
                     console.warn("Telegram WebApp not found, using test user ID:", userId);
                     document.getElementById('userAvatar').textContent = 'T';
                     document.getElementById('profileAvatar').textContent = 'T';
                     document.getElementById('profileName').textContent = 'Test User';
                     document.getElementById('profileId').textContent = `ID: ${userId}`;
                }
                if (!userId) {
                    throw new Error("User ID is not available");
                }
                // 2. Set up Firebase references
                userRef = database.ref('users/' + userId);
                // 3. Load App Settings from Firebase
                await loadAppSettings();
                // 4. Load User Data from Firebase
                await loadUserData();
                // 5. Check for Referral on App Start (if not already referred)
                const urlParams = new URLSearchParams(window.location.search);
                const referrerId = urlParams.get('ref');
                if (referrerId && referrerId !== userId && !userData.referredBy) {
                     console.log("New referral detected:", referrerId);
                     await processReferral(referrerId);
                }
                // 6. Update UI with loaded data
                updateBalanceDisplay();
                updateTaskRewards(); // Update task rewards based on settings
                updatePaymentNumber(); // Update payment number based on settings
                // 7. Set up real-time listeners
                setupRealTimeListeners();
                // 8. Check if user is blocked
                if (userData.isBlocked) {
                    document.getElementById('blockPage').style.display = 'flex';
                } else {
                    document.getElementById('blockPage').style.display = 'none';
                }
                // 9. Hide loading screen
                document.getElementById('loadingScreen').style.display = 'none';
                console.log("App initialized successfully for user:", userId);
            } catch (error) {
                console.error("Error initializing app:", error);
                showNotification("Failed to load app. Please try again.", false);
                document.getElementById('loadingScreen').style.display = 'none'; // Hide loading even on error
            }
        }
        // Load App Settings from Firebase
        async function loadAppSettings() {
            try {
                const settingsRef = database.ref('admin/settings');
                const snapshot = await settingsRef.once('value');
                appSettings = snapshot.val() || {};
                console.log("App Settings Loaded:", appSettings);
            } catch (error) {
                console.error("Error loading app settings:", error);
                showNotification("Failed to load settings.", false);
            }
        }
        // Load User Data from Firebase
        async function loadUserData() {
            try {
                const snapshot = await userRef.once('value');
                const data = snapshot.val();
                if (data) {
                    // Merge with default userData to ensure all fields exist
                    userData = { ...userData, ...data };
                    console.log("User Data Loaded:", userData);
                } else {
                    // Create new user entry if not exists
                    console.log("New user, creating entry...");
                    await createUserEntry();
                }
            } catch (error) {
                console.error("Error loading user ", error);
                showNotification("Failed to load user data.", false);
            }
        }
        // Create a new user entry in Firebase
        async function createUserEntry() {
             const newUser = {
                balance: 0,
                totalEarned: 0,
                adViews: 0,
                referrals: 0,
                isVip: false,
                isBlocked: false,
                lastCheckin: null,
                referredBy: userData.referredBy || null, // Set if referral was processed
                createdAt: firebase.database.ServerValue.TIMESTAMP
            };
            try {
                 await userRef.set(newUser);
                 userData = { ...userData, ...newUser }; // Update local userData
                 console.log("New user entry created:", userId);
            } catch (error) {
                console.error("Error creating user entry:", error);
                showNotification("Failed to create user profile.", false);
            }
        }
        // Set up real-time listeners for user data and app settings
        function setupRealTimeListeners() {
            // Listen for user data changes
            userRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    userData = { ...userData, ...data };
                    updateBalanceDisplay();
                    console.log("User data updated from Firebase:", userData);
                    // Check if user is blocked
                    if (userData.isBlocked) {
                        document.getElementById('blockPage').style.display = 'flex';
                        // Disable all buttons except those in block page
                        document.querySelectorAll('button:not(.telegram-link)').forEach(btn => {
                            btn.disabled = true;
                        });
                    } else {
                        document.getElementById('blockPage').style.display = 'none';
                        // Enable all buttons
                        document.querySelectorAll('button').forEach(btn => {
                            btn.disabled = false;
                        });
                    }
                }
            }, (error) => {
                console.error("Error listening to user data:", error);
                showNotification("Connection error. Data might be outdated.", false);
            });
            // Listen for app settings changes
            const settingsRef = database.ref('admin/settings');
            settingsRef.on('value', (snapshot) => {
                const settings = snapshot.val();
                if (settings) {
                    appSettings = settings;
                    updateTaskRewards();
                    updatePaymentNumber();
                    // Removed dynamic Monetag script update logic
                    console.log("App settings updated from Firebase:", appSettings);
                }
            }, (error) => {
                console.error("Error listening to app settings:", error);
            });
        }
        // Update UI with current user data
        function updateBalanceDisplay() {
            document.getElementById('home-balance').textContent = formatNumber(userData.balance) + ' BDT';
            document.getElementById('profile-balance').textContent = formatNumber(userData.balance);
            document.getElementById('home-total-earned').textContent = formatNumber(userData.totalEarned);
            document.getElementById('home-ad-views').textContent = userData.adViews || 0;
            document.getElementById('home-referrals').textContent = userData.referrals || 0;
            document.getElementById('profile-ad-views').textContent = userData.adViews || 0;
            document.getElementById('profile-referrals').textContent = userData.referrals || 0;
        }
        // Update task rewards based on Firebase settings
        function updateTaskRewards() {
            document.getElementById('watchAdReward').textContent = `+${formatNumber(appSettings.watchAdReward || 0.00100)} BDT`;
            document.getElementById('shareAppReward').textContent = `+${formatNumber(appSettings.shareAppReward || 0.00200)} BDT`;
            document.getElementById('inviteFriendsReward').textContent = `+${formatNumber(appSettings.inviteFriendsReward || 0.00050)} BDT/each`;
            document.getElementById('dailyCheckinReward').textContent = `+${formatNumber(appSettings.dailyCheckinReward || 0.00150)} BDT`;
        }
        // Update payment number based on Firebase settings
        function updatePaymentNumber() {
            const paymentNumber = appSettings.paymentNumber || '01750114669'; // Default
            document.getElementById('payment-number').textContent = paymentNumber;
            document.getElementById('payment-number2').textContent = paymentNumber;
        }
        // --- Task Functions ---
        // Watch Ad (Monetag) - Simplified to use fixed script
        async function showMonetagAd() {
            // Check if the Monetag function is available
            if (typeof window.show_9753772 !== "undefined") {
                try {
                    // Call the Monetag ad function
                    await window.show_9753772();
                    // Reward user (using default reward as script is fixed)
                    const reward = appSettings.watchAdReward || 0.00100;
                    await rewardUser(reward, 'ad_view');
                    showNotification(`You earned ${formatNumber(reward)} BDT for watching an ad!`, true);
                } catch (error) {
                    console.error('Ad error:', error);
                    showNotification('Failed to load ad. Please try again.', false);
                }
            } else {
                showNotification('Ad script is still loading. Please try again shortly.', false);
            }
        }
        // Rewarded Ad for Tasks Page (same as above)
        async function showRewardedAd() {
             // Check if the Monetag function is available
            if (typeof window.show_9753772 !== "undefined") {
                try {
                    // Call the Monetag ad function
                    await window.show_9753772();
                    // Reward user (using default reward as script is fixed)
                    const reward = appSettings.watchAdReward || 0.00100;
                    await rewardUser(reward, 'ad_view_task');
                    showNotification(`You earned ${formatNumber(reward)} BDT for watching an ad!`, true);
                } catch (error) {
                    console.error('Ad error:', error);
                    showNotification('Failed to load ad. Please try again.', false);
                }
            } else {
                showNotification('Ad script is still loading. Please try again shortly.', false);
            }
        }
        // Share App
        function shareApp() {
            const shareLink = `${window.location.origin}${window.location.pathname}?ref=${userId}`;
            const shareText = appSettings.shareText || "Join me on this awesome earning app!"; // Get from settings
            if (navigator.share) {
                navigator.share({
                    title: 'EARN PRO',
                    text: shareText,
                    url: shareLink
                }).then(() => {
                    console.log('Shared successfully');
                    // Optionally reward for sharing attempt
                }).catch((error) => {
                    console.log('Sharing failed', error);
                    // Fallback to copying link
                    copyToClipboard(shareLink);
                });
            } else {
                // Fallback for browsers that do not support Web Share API
                copyToClipboard(shareLink);
            }
        }
        // Invite Friends (same as Share App for now)
        function inviteFriends() {
            shareApp(); // Reuse share logic
        }
        // Copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Link copied to clipboard!', true);
            }).catch(() => {
                showNotification('Failed to copy link!', false);
                // Fallback: create a temporary input
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('Link copied to clipboard!', true);
                } catch (err) {
                    showNotification('Failed to copy link!', false);
                }
                document.body.removeChild(textArea);
            });
        }
        // Claim Daily Check-in
        async function claimDailyCheckin() {
             const now = new Date();
             const today = now.toISOString().split('T')[0]; // YYYY-MM-DD
             if (userData.lastCheckin === today) {
                 showNotification("You have already claimed your daily reward today!", false);
                 return;
             }
             const reward = appSettings.dailyCheckinReward || 0.00150;
             try {
                 await rewardUser(reward, 'daily_checkin');
                 // Update lastCheckin in Firebase
                 await userRef.update({ lastCheckin: today });
                 userData.lastCheckin = today; // Update local copy
                 showNotification(`Daily check-in successful! You earned ${formatNumber(reward)} BDT.`, true);
             } catch (error) {
                 console.error("Error claiming daily check-in:", error);
                 showNotification("Failed to claim daily reward. Please try again.", false);
             }
        }
        // Process Referral
        async function processReferral(referrerId) {
            try {
                // 1. Update referrer's referral count and balance
                const referrerRef = database.ref('users/' + referrerId);
                const referrerSnapshot = await referrerRef.once('value');
                const referrerData = referrerSnapshot.val();
                if (referrerData) {
                    const referrerBalance = referrerData.balance || 0;
                    const referrerReferrals = referrerData.referrals || 0;
                    const referralBonus = appSettings.referralBonus || 5; // Default 5 BDT
                    await referrerRef.update({
                        balance: referrerBalance + referralBonus,
                        referrals: referrerReferrals + 1
                    });
                    console.log(`Referrer ${referrerId} rewarded with ${referralBonus} BDT`);
                    // 2. Update current user's referredBy field
                    await userRef.update({ referredBy: referrerId });
                    userData.referredBy = referrerId; // Update local copy
                    // 3. Record referral in Firestore (optional, for better tracking)
                    // await firestore.collection('referrals').add({
                    //     referrerId: referrerId,
                    //     referredId: userId,
                    //     timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    //     bonus: referralBonus
                    // });
                    showNotification(`Welcome! You were referred. ${referralBonus} BDT bonus added!`, true);
                } else {
                    console.warn("Referrer ID not found in database:", referrerId);
                }
            } catch (error) {
                console.error("Error processing referral:", error);
                // Don't show notification for referral error to user, it's background process
            }
        }
        // --- Reward and Update Functions ---
        // Reward user and update Firebase
        async function rewardUser(amount, type = 'unknown') {
             if (amount <= 0) return;
             const newBalance = userData.balance + amount;
             const newTotalEarned = userData.totalEarned + amount;
             const newAdViews = (type.includes('ad_view') ? (userData.adViews || 0) + 1 : userData.adViews);
             try {
                 await userRef.update({
                     balance: newBalance,
                     totalEarned: newTotalEarned,
                     adViews: newAdViews,
                     // Update other fields if needed in the future
                 });
                 // Update local userData
                 userData.balance = newBalance;
                 userData.totalEarned = newTotalEarned;
                 userData.adViews = newAdViews;
                 // Update UI
                 updateBalanceDisplay();
                 // Log transaction (optional, can be done in admin panel or Firestore)
                 // await firestore.collection('transactions').add({
                 //     userId: userId,
                 //     type: 'earning',
                 //     amount: amount,
                 //     source: type,
                 //     timestamp: firebase.firestore.FieldValue.serverTimestamp()
                 // });
                 console.log(`User ${userId} rewarded with ${amount} BDT for ${type}`);
             } catch (error) {
                 console.error("Error rewarding user:", error);
                 showNotification("Failed to update balance. Please try again.", false);
                 throw error; // Re-throw to let calling function handle
             }
        }
        // --- Financial Functions ---
        // Submit deposit request
        async function submitDeposit() {
            const userPhone = document.getElementById('user-phone').value.trim();
            const transactionId = document.getElementById('transaction-id').value.trim();
            const amount = parseFloat(document.getElementById('deposit-amount').value);
            const paymentMethod = document.getElementById('payment-method').value;
            if (!userPhone || !transactionId || !amount || amount <= 0) {
                showNotification('Please fill in all fields correctly!', false);
                return;
            }
            const depositBtn = document.getElementById('submitDepositBtn');
            depositBtn.disabled = true;
            depositBtn.textContent = 'Submitting...';
            try {
                // Add deposit request to Firestore
                await firestore.collection('deposit_requests').add({
                    userId: userId,
                    userPhone: userPhone,
                    transactionId: transactionId,
                    amount: amount,
                    paymentMethod: paymentMethod,
                    status: 'pending', // Default status
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                showNotification(`Deposit request submitted! Amount: ${formatNumber(amount)} BDT. Awaiting admin approval.`, true);
                // Reset form
                document.getElementById('user-phone').value = '';
                document.getElementById('transaction-id').value = '';
                document.getElementById('deposit-amount').value = '';
            } catch (error) {
                console.error("Error submitting deposit:", error);
                showNotification('Failed to submit deposit request. Please try again.', false);
            } finally {
                depositBtn.disabled = false;
                depositBtn.textContent = 'SUBMIT DEPOSIT';
            }
        }
        // Process Withdrawal
        async function processWithdrawal() {
             const method = document.getElementById('withdraw-method').value;
             const amount = parseFloat(document.getElementById('withdraw-amount').value);
             const account = document.getElementById('account-number').value.trim();
             if (!amount || amount <= 0) {
                 showNotification('Please enter a valid amount!', false);
                 return;
             }
             if (amount > userData.balance) {
                 showNotification('Insufficient balance!', false);
                 return;
             }
             if (!account) {
                 showNotification('Please enter your account number!', false);
                 return;
             }
             const withdrawBtn = document.getElementById('processWithdrawalBtn');
             withdrawBtn.disabled = true;
             withdrawBtn.textContent = 'Processing...';
             try {
                 // 1. Deduct amount from user's balance in Firebase RTDB
                 const newBalance = userData.balance - amount;
                 await userRef.update({ balance: newBalance });
                 userData.balance = newBalance; // Update local copy
                 updateBalanceDisplay(); // Update UI immediately
                 // 2. Add withdrawal request to Firestore
                 await firestore.collection('withdrawal_requests').add({
                     userId: userId,
                     amount: amount,
                     method: method,
                     account: account,
                     status: 'pending', // Default status
                     timestamp: firebase.firestore.FieldValue.serverTimestamp()
                 });
                 showNotification(`Withdrawal request for ${formatNumber(amount)} BDT via ${method} submitted successfully! Awaiting admin approval.`, true);
                 // Reset form
                 document.getElementById('withdraw-amount').value = '';
                 document.getElementById('account-number').value = '';
             } catch (error) {
                 console.error("Error processing withdrawal:", error);
                 // Rollback balance update? (Complex, better handled by admin)
                 showNotification('Failed to process withdrawal. Please try again.', false);
             } finally {
                 withdrawBtn.disabled = false;
                 withdrawBtn.textContent = 'WITHDRAW NOW';
             }
        }
         // Request VIP membership
        async function requestVip(price, packageName) {
             if (userData.balance < price) {
                 showNotification(`Insufficient balance! You need ${formatNumber(price)} BDT for this VIP package. Redirecting to deposit...`, false);
                 setTimeout(() => {
                     showPage('deposit-page');
                 }, 2000);
                 return;
             }
             try {
                 // 1. Deduct balance
                 const newBalance = userData.balance - price;
                 await userRef.update({ balance: newBalance });
                 userData.balance = newBalance; // Update local copy
                 updateBalanceDisplay(); // Update UI
                 // 2. Add VIP request to Firestore
                 await firestore.collection('vip_requests').add({
                     userId: userId,
                     price: price,
                     packageName: packageName,
                     status: 'pending', // Default status
                     timestamp: firebase.firestore.FieldValue.serverTimestamp()
                 });
                 showNotification(`VIP ${packageName} request submitted! Admin will review your request.`, true);
             } catch (error) {
                 console.error("Error requesting VIP:", error);
                 // Rollback balance update? (Complex)
                 showNotification('Failed to submit VIP request. Please try again.', false);
             }
        }
        // --- History Functions ---
        // Load Withdraw History
        async function loadWithdrawHistory() {
             const historyList = document.getElementById('withdraw-history-list');
             historyList.innerHTML = '<div class="spinner"></div><div class="loading-text">Loading history...</div>';
             try {
                 const snapshot = await firestore.collection('withdrawal_requests')
                     .where('userId', '==', userId)
                     .orderBy('timestamp', 'desc')
                     .get();
                 historyList.innerHTML = ''; // Clear loading spinner
                 if (snapshot.empty) {
                     historyList.innerHTML = '<p style="text-align:center;">No withdrawal history found.</p>';
                     return;
                 }
                 snapshot.forEach(doc => {
                     const data = doc.data();
                     const dateStr = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleString() : 'N/A';
                     const statusClass = `status-${data.status || 'pending'}`;
                     const statusText = data.status ? data.status.charAt(0).toUpperCase() + data.status.slice(1) : 'Pending';
                     const historyItem = document.createElement('div');
                     historyItem.className = 'history-item';
                     historyItem.innerHTML = `
                         <div class="history-info">
                             <div class="history-amount">${formatNumber(data.amount || 0)} BDT</div>
                             <div class="history-method">${data.method || 'N/A'} - ${data.account || 'N/A'}</div>
                             <div class="history-date">${dateStr}</div>
                         </div>
                         <div class="history-status ${statusClass}">${statusText}</div>
                     `;
                     historyList.appendChild(historyItem);
                 });
             } catch (error) {
                 console.error("Error loading withdraw history:", error);
                 historyList.innerHTML = '<p style="text-align:center; color: red;">Failed to load history.</p>';
             }
        }
        // Load Deposit History
        async function loadDepositHistory() {
             const historyList = document.getElementById('deposit-history-list');
             historyList.innerHTML = '<div class="spinner"></div><div class="loading-text">Loading history...</div>';
             try {
                 const snapshot = await firestore.collection('deposit_requests')
                     .where('userId', '==', userId)
                     .orderBy('timestamp', 'desc')
                     .get();
                 historyList.innerHTML = ''; // Clear loading spinner
                 if (snapshot.empty) {
                     historyList.innerHTML = '<p style="text-align:center;">No deposit history found.</p>';
                     return;
                 }
                 snapshot.forEach(doc => {
                     const data = doc.data();
                     const dateStr = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleString() : 'N/A';
                     const statusClass = `status-${data.status || 'pending'}`;
                     const statusText = data.status ? data.status.charAt(0).toUpperCase() + data.status.slice(1) : 'Pending';
                     const historyItem = document.createElement('div');
                     historyItem.className = 'history-item';
                     historyItem.innerHTML = `
                         <div class="history-info">
                             <div class="history-amount">${formatNumber(data.amount || 0)} BDT</div>
                             <div class="history-method">${data.paymentMethod || 'N/A'} - ${data.transactionId || 'N/A'}</div>
                             <div class="history-date">${dateStr}</div>
                         </div>
                         <div class="history-status ${statusClass}">${statusText}</div>
                     `;
                     historyList.appendChild(historyItem);
                 });
             } catch (error) {
                 console.error("Error loading deposit history:", error);
                 historyList.innerHTML = '<p style="text-align:center; color: red;">Failed to load history.</p>';
             }
        }
        // --- Support & Copy ---
        // Copy payment number to clipboard
        function copyNumber() {
            const number = document.getElementById('payment-number').textContent;
            copyToClipboard(number);
        }
        // Open Support
        function openSupport() {
            const supportLink = appSettings.supportLink || "https://t.me/earnpro_support"; // Get from settings
            window.open(supportLink, '_blank');
        }
        // --- Initialize on Load ---
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
        // Prevent zoom on double tap
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(e) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
